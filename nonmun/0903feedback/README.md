## 약상자

+ Abstract   
본 연구에서는 약 관리를 효율적으로 할 수 있는 스마트 약상자를 개발하였다. 약을 정기적으로 복용해야하는 사용자에 대해 약 복용을 관리할 수 있다. 이를 위해 3D 프린팅을 이용하여 외부 케이스를 제작하고 약을 보관하게 하였으며, 사용자의 복약 현황을 나타내주는 LCD가 전면에 있다. 제안하는 스마트 약상자를 이용하여 사용자의 복약을 효율적으로 관리할 수 있으며 복약 순응성을 높이고 약물의 오남용을 막을 수 있다. 

(사용자의 복약 복약 지도 복약순응성 복약을 효율적으로 관리한다.. 복약이라고 쓸려면 복약이라고 쓰는게 나을 것 같다. 복약을 효율적으로 관리한다.. 라는지 복약이라고 쓰는게 조금 맞는것 같고)


---------------------------
+ 서론   
(2:40)
(사실 꼭 30분에 안먹어도 되자나 저게 뭐 효율적이락 ㅗ할수 있나 실질적 시간이 있을수 있는거자나요.. 적당한 적절한,,? 고민해봐...최적,,? 아무튼 그런 느낌 약에따라 복용시간을..)

처방받은 약이나 건강식품의 복용시간은 식후 30분, 취침 전, 공복 등으로 다양하다. 약에따라 복용 시간을 정확하게 지켜야 약 효과가 커지고 부작용이 줄어든다.
 (꾸준히 적절하게,.,??ㅋㅋ 꾸준히를 없애자... 적절한 시간에 복용하지 않는 환자들.. 일단 꾸준히는 없어야할거같고 아이고 그런 비슷한 말이라도 복약지도를 따르지 않으면..)
 
 대표적인 예로 혈압약이 있으며, 연구결과에 의하면 혈압약을 적절하게 복용하지 않는 환자들이(복약순응도를 따르지 않은 환자들이) 첫 처방 후 2년 내 뇌졸중으로 삿망할 위험이 4배 높고, 10년 내에는 3배 높은 것으로 나타났다. (오우 잘찾았다..링크는 저장했.. 기사에요? 논문이에요? 음 잘했어요 굉장히..)
 
 또한 약을 복용하고 있는 사람들의 (사람이라고 쓰죠)약물 슨응도 수준은 94.2%, 불순응 수준은 5.8%로 나타났다.(순응도 수준이라는 게 뭐죠? 안따르는 사람은 그렇게 많진 않네) 
 약물 불순응의 원인으로는 '약 먹는 것을 잊어버려서'가 82명(57.3%)로 가장 많은 분포를 보였고....(생략) (그래서 지금 이걸 타겟으로 얘길하겟다는 거죠 이건 그린거야? 음... 내생각에는 없는게 나을 거 같아요.. 왜냐몬 보통 원래 논문에 들어가는 테이블 그림은 우리가 한걸 정리.. 결국 중요한거는 결국 57.3퍼센트가 중요.. 뒤에 뭐는 몇퍼는 중요하지 않아 가장많은 분포를 보였다까지 해도 하고싶은말은 다한거다 뒤에꺼는 굳이 없어도 됨 상관이 없다. 그러면은 얘네들이 없어지면 그림이 또 필요없어진다. 그렇습니다.)

(혹시 약물 순응도라는게 영어 단어가 있었어? 약물 순응도라는 말이 있는 단어 같은데 있으면 얘는 처음으로 나오는 부분에 괄호치고 영어로 한번 써보는 것도 괜찮다 이게 관련 키워드가 되는것... 약물 순응도에 대한 해외 논문 기사나 찾을려면 이걸 기점으로 찾을 수 있게 되는거죠 이런말이 실제로 연구에서 쓰이는 말이라면 .. 없으면 그냥 놔둬.. 이지표가 있을 거아니야? 94.2퍼 얘네가 이말을 뭔가 써놨을거 아니야? 일단 검색해봐 쫙 나오면 다들 쓰는 말이구나 ...함서..)

위와 같은 연구결과에서 약물 순응도에 대한 문제 인식이 꾸준히 제기되고 있으며, 특정 약은 잊을 경우 부작용이 심하다는 것을 알 수 있다.
(약 먹는거를 잊어버리는거 심각하다는걸 쓸 필요는 없고.,. 약물순응도가.. 약물순응도가 안좋으면 부작용이 심하다 얘길 해줘야하는데요.. 잊는건 이거만 해당하는 거잖아 순 이거 이거 2년 4배 10년 3배 이게 지금 순응도가 안좋으면 이럴수가 있다는 거잖아요 순응도가 ㅇ나좋은 이유중에 이게 있는거고 잊을경우 .. 이거보단 불슨응도라고 해야돼? 머라해야돼? 어쨋든 순응도 수준 94.2는 좋다는 거잖아 나머진 불순응이라 해놨는데 말이 대칭..이 되는거죠 순응도 수준 vs 불순응 수준.. 이게 지금 얘네가 영어 문장으로 치면은 병렬적인 구조가 맞냐는 거죠.. 순응도 수준! 그러면 뭔가 느낌 불순응 수준이라는 건 ... 뭐 확인좀 해봐요..) 

또한, 시중

(시중..자 여기는 이런 문구 추가합시다.. 뭘 넣냐면요 이런 문제를 해결하기위해 스마트 약상자를 이제 지금 얘네둘은 문제가 된다는거에 대한 논문이였죠.자 어쩃든 이거를 해결하기위해 스마트약상자를 만드는데 우리가 처음한게 아니자나 누군가 한게 있어 앞에 요렇게도 사람들이 많들어봤고 저렇게도 했고 열심히 사람들이 연구를 했다.. 가 여기 사이에 들어가야해 몇개 찾아봐 스마트 약상자에 관한 논문 몇개나왔자나 거기 논문 요약할 필욘 없고 이걸 해결하기 위해서 스마트 약상자라는 걸 그런걸 여ㅑㄴ구를 해왔고 어떤거 어떤거 했다 참고문헌 두개 또는 세개 정도 걔네 원리까지 쓸필욘 없고 그런 연구들이 있다!.. 그런 느낌.. 그런데!! 거기에서 ..기존에 연구한 결과 또는 제품 그런 약상자들은 이제 좋긴한데.. 너무 까내리면 안돼.. 일단 칭찬을 한번해주고 충분히 효율성이 있다거나 . 좋은데 이러한 부분에서 특정특정 부분에서 아직 개선될 여지가 있다 아직 보완될 필요성이 있다가 지금 이건거에요 휴대성~~ 약의 종류가 부족한..~~ 문제점 보단 개선점 아직 얘네가 잘 만들긴 했지만 조금 더 개선할 여지가 있고 그런식으로 말을 쓰는게 좋겠죠.. 나중에 누가 너네 걔네꺼 하등필요없다.. 잘했어! 잘했는데 .. 우리가 보니까 조금 개선할 부분이 있는거 같고 그부분에 대해 우리가 한번 신경 써봤따.. 영어 인트로 문구: 우리말로 하면 나의 짧은지식으로는 내생각에는 완전히 연구되지 않았으며 이 연구가 뭐 그런 동기로 시작됐다.. 라는 말을 좋아한다. ) 

에 나와 있는 제품(이 제품이라는게 지칭하는게 약인가? 아 아 그거고.. 이미 기존에 한 약상자라는거죠? 예..)들은 휴대성이 떨어지거나 보관할 수 있는 약의 개수와 종류가 부족한 문제점이 있다. 따라서, 연구나 관심은 조금 부족한 상황이고 더 연구될 필요성이 있으며 이것이 제안하고자 하는 연구의 목표이다.

(뒤에 비슷하게 썻네요... 제가 말한대로 썻는데 부족한 상황,, 필요성이 있으며.. 이것이..음.. 목표,, 목표.. 말이 얼추 나쁘진 않은데 목표라는 말이 여기에 쓰기엔 애매해요.. 지금 이거 자체는 이 연구 하게된 동기에 대해 말하고 있는건데 목표보다는.. 동기이다.. 동기이다 하기엔 말이 좀 이상한가?? 그리고 여기까지 개선할 부분이 있다라고 썼으면은 .. 따라서가 쪼금.. 따라서가 조금 이상한데.. 따라서 연구나 관심이 부족한 거보단.. 따라서 연구될필요성이 있다는 검 맞는데 따라서 부족은 인과관계가 좀 이상하다. 연구나 관심이 족므 부족한ㅅ ㅏㅇ황을 말하고 싶으면 그러나.. 요렇게 말이 되야되겟지 개선할점이 있다. 그런데 연구나 관심이 부족하고.. 따라서 저 뒤에 말은 맞는데.. 그래서 어떻게 쓰는건 자유인데 아다리가 맞게 빼고싶으면 빼고 저말은  however에 맞는건데 저건 therefore.. 이게 두개 같이 있어서 이상하고 뒤에말도 비슷하게 수정이 되겠죠? 음 연구될 필요성이 있으며.... 동기 동기이다.. 모티베이션이라 쓰는데 동기..라고 쓰니까 되게 없어보이네.. 목표이다로 쓸려면 그래서 필요성이 있으며 이런 부분을 개선하고 하는 것이 이 연구의 동기이자 목표이다 뭐 요런식으로... 그런느낌으로~ 그거를 개선하는 것이 또는 그런부분을 연구하는 것이 목표이다. .. 제안하고자 하는 연구의 목표보단 나을 것 )

본 연구에서는 환자가 복용해야 하는 약과 개인이 소비하는 건강기능  식품의 관리에 도움을 제공하는 시스템을 제안한다.
(개인이 소비하는......뭔 느낌으로 쓴건진 알겠어 약만 쓸건 아니고 뭔가 비타민 그런걸 염두하고 쓴건 알겠다 음..) 

(여기도 복약순응도 라는 말을 쓰면 좋을 것 같거든요.. 환자 환자.. 아까 환자랑 사람고민하다 사람하기로 했잖아.. 음 그래서 여기도 환자고 개인이구나.. 고민한 흔적이 보여.. ㅋㅋ 본 연구에서는~! 그럼 이런느낌이 되면 좋을거같에 복약순응도를.. 결국 높이기 위한 거잖아여? 지금 만들고자 하는게? 대충 그말이 뭉뚱그러져 있다, 그냥 관리에 도움을 준다 되어있자나.. 그래서 여기가 차라리 굳이 복용해야하는 약 소비해야하는 건강기능 식품 요런 말보다는 차라리...음... 일단 제가 그냥 생각난대로 말을해보면 지금 이표는 안쓸꺼죠? 약물 불순응의 원인중 가장 큰 거가 지금 잊어버려서 이잔하 쓸말이 없는데.. 약물 불순응의 주요한 원인을 주요한 그런 어떤 요인? 요인을 좀 개선 해결 도와줄 수 있는 스마트 약상자 시스템을 제안한다. 뭐 요런느낌이 되는게 나을것 같다. 앞에 약물불순응 이건 되게 잘썻어.. 복약순응도를 따르지 않아서 문제가 생길수 있는 것도 있으며 그 약물 불순응이 생기는 주요원인이 까먹어서.. 까먹는거를 줄여보자는거 안까먹게끔 그거를 이제 관리한다기 보다는 방금 말한거처럼 정리 해봐... 약물 불순응의 원인 주요한 원인.. 잊어버려서.. 말이 너무  세련되지 않다. 풴씌 하지 않아 굳이 펜시하지 않아도 암튼 느낌은 그게에여 약물 불슨응의 원인을 효과적으로 줄일 수 있는 .. 또는 순응도를 높일수 있는 이런식의 대체말을 써서 그런걸 할 수 있는 스마트 약상자 시스템을 제안하다.)

(스마트 약상자추가) 케이스는 3d 프린터로 인쇄하였으며 2가지의 약을 보관할 수 있다. 블루투스 통신 시스템을 이용하여 사용자의 스마트폰 어플리케이션과 연동을 할 수 있으며 복용해야할 약들에 대해 알람 설정을 할 수 있다.
(기능을 할수있따..? 말이 이상하다 .. 기능을 굳이 쓰고싶다면 기능이 있다.로 둘중에 하나로 고민 해봐)

제안하는 시스템은 정기적으로 복용해야할 약들에 대한 관리를 효율적으로 할 수 있게 한다.

(굉장히 뭔가 원래있던 내용보다 축약됐는데? 자 잠깐 보자.. 뭐지 원래 이렇게 짧았나 이부분이 .. 이게 음 나 그때 얘기를 했나모르겠는데 젤 마지막 부분이 어디랑 젤 비슷하냐면 앱스트랙이랑 비슷하다.. 근데 앱스가 간단하고 덜쓴말을 여기에 쓰는데 오히려 반대인 느낌이다. 그래서 앱스보다 더 자세하게 써져야한다. 앱스 내용은 다포함하고있고.. 복약시간을 지정하여 알람설정 얘기있고.. 복약현황 LCD 얘기가 없지 제안하는 스마트 약상자를 이용하여 정기적으로 복용해야하는 사용자에대해 복약지도를 해준다. 복약지도를 해줘서 효율적으로 관리할 수 있고 자 이것도 말 통일 순응성과 순응도.. 차라리 음 뭐 여기 지금 이말이 굉장히 축약이 되서 딱 줄어들었는데 음.. 
가장 간단한 방법은 바꾸는건데 근데 앱스 잘써서 흠.. 그래서 이부분을 앱스 느낌이 나도록 대신 말은 조금 다르게 써보면 좋을거같다 너무 뭐랄까 갑자기 설명이 부족해 .. 잘 빌드업 했는데 마지막에 조금 뭐가 없어 이부분 그래서 이걸 참고를 해서 앱스 느낌이 나게 대신 조금 더 길게 앱스 내용 참고해도 좋고.. 풍부하게 써봐요..
제안하는 한번만 쓰면 될거같은데..? 움.. 보자.. 봅시다.. 네 상관없어요.. 잠깐만 이정돈 상관없고 잠깐만... 음 자 알겟습니다 자 일단 이부분에 지금 여기는 관리를 해줘서 이렇게 해주겠다. 되어있자나요 여기에는 그런내용을 들어갈수 있으면 좋을거같에 어떻게 라는거 조금이라도 원리.. 뭐라 얘기해야하나 복약지도를 해주겟다 되어있는데 어떻게 해주겟다는 그런 내용이 들어가면은... 아무튼 너무 짧아 여긴 설명이 너무없어 그리고 지금보니깐 이문장이랑 이문장이 비슷한거같아 왜냐면 마지막이 짧아서 그래 늘려... 음 일단 쓰읍 (~32:08))

---------------------------

+ 본론   
    + 전체 시스템 구성   
        + 전체적인 시스템 구성은 그림<1>과 같으며 AVR 기반의 ATmega128을 이용하여 제어한다. 또한 스마트폰 어플리케이션과의 블루투스 통신을 위해 블루투스 모듈(HC-05)을 사용한다. 하드웨어 제어를 위해 서보모터(SG-90)를 사용하였으며, Pulse Width Modulation(PWM) 제어 방식으로 –90° ~ 90° 까지 작동한다. 사용자의 약 복용 현황을 알려주기 위해 LCD를 사용한다. __약의 배출을 감지하기 위해 포토 인터럽터 센서 모듈(SEN030111)을 사용하며, 이 센서는 두 수광소자, 발광소자 사이에 물체가 존재하면 빛이 차단되고, 빛의 차단 유무로 물체의 존재를 판단하는 원리로 작동한다.__ 전원 공급을 위해 5V 충전 가능 전원 공급기(JBATT-U5-LC)와 리튬폴리머 배터리(5000mAh)를 사용한다0011.   
        ![그림1](그림1.png)


    + 약상자 외부 케이스    
        + 약상자의 케이스는 3D 프린터를 이용하여 제작하였다. 케이스 제작에 쓰인 3D 프린터는 Cubicon Single Plus 320C를 사용하였으며 3D 모델링 프로그램은 Autodesk의 TinkerCAD를 이용했다. <그림2>는 케이스의 3D 모델링을 보여준다. 케이스 크기는 76mm * 88mm * 80mm 이며 (기존에 나와있는 제품은 소분해서 넣어야하는데 이건..한알씩...)상단부는 약을 보관하는 공간이며 왼쪽칸과 오른쪽칸이 있으며 각 공간의 크기는 동일하고(41mm * 20mm) OO약을 기준으로 OO만큼 약 보관이 가능하다. 중단부는 약이 하단부로 통과하는 공간이 있으며 크기는 13mm * 15mm 이다. 이는 서보모터에 부착된 판으로 가려지는 부분이며 바로 아래에 포토 인터럽트 모듈이 위치한다. 마지막으로, 하단부는 약이 배출될 때 약을 보관할 서랍이 있으며, 서랍 잠금장치를 위한 서보모터가 있다. 이 서랍은 앞뒤로 꺼내고 넣을 수 있게 설계하였다.   
        ![그림2](그림2.png)
        
    + 약상자 시스템 어플리케이션   
        + 약상자 시스템에서 이용하기 위한 개발한 어플리케이션은 안드로이드 기반의 어플리케이션이며, __웹기반 안드로이드 앱 개발 플랫폼인__ MIT APP Inventor2를 이용하였다 [1]. 어플리케이션의 인터페이스는 <그림 4>와 같다. 케이스와의 통신을 위하여 블루투스 연결 버튼이 있으며 두 개의 약 보관 공간에 대해 알람 시간을 설정하는 버튼이 있다. 또한, 약상자 케이스의 서랍 잠금장치를 열고 잠그는 기능을 하는 ‘open’, ‘close’ 버튼이 어플리케이션 하단에 있다. 마지막으로, LCD에 표시한 각 약 복용 횟수를 초기화 할 수 있는 버튼 ‘r’, ‘R’이 있다. 사용자가 설정한 알람 시간이 되면 스마트폰 상단바에 알림이 울리며 사용자가 알 수 있도록 한다.   
        ![그림3](그림3.png)

    + 시스템 알고리즘   
        + 개발한 약상자 시스템은 ATmega128을 통해 제어 한다. 알고리즘의 순서도는 그림<4>와 같다. 약상자 케이스의 상단부에 약을 보관하며, 스마트폰 어플리케이션에서 설정한 시간이 되면 블루투스 USART 통신을 이용하여 MCU(ATmega128)(아니면 약상자)에 신호를 보낸다. 약상자가 어플리케이션으로부터 신호를 받으면 블루투스 수신 인터럽트 서비스 루틴을 이용하여 해당 신호에 맞는 동작을 실행한다.또한, 설정한 시간이 되었을 경우 서보모터가 작동하여 약을 배출한다. 서보모터는 PWM 제어를 통해 작동하며, Duty ratio에 비례하여 서보모터의 각도가 설정된다. 그러므로 Duty ratio를 천천히 증가시켜 모터를 작동시킨다. 서보모터에 부착된 판에 의해 가려진 통로를 열어 약을 떨어트리게 만든다. 이때, 약이 떨어진다면 하단에 있는 포토 인터럽트 모듈에 의해 감지가 된다. 그리고, 서보모터를 다시 반대 방향으로 작동시켜 통로를 막는 방법으로 구현하였다. (기존에 나와있는 제품은 소분해서 넣어야하는데 이건..한알씩...) 사용자가 각 약을 소비할 때마다 개수를 카운트해 얼마나 복용했는지 사용자가 알도록 하기 위하여 전면부에 부착된 LCD에 표시를 한다. 또한 10개 이상 복용하였을 경우 스마트폰 어플리케이션을 통해 알림을 보내 사용자가 인지하도록 하였다.   
        ![그림4](그림4.png)


    + 서보모터 작동 방식에 대한 실험 및 고찰   
        + 초기 연구에서 사용한 서보모터 제어 알고리즘은 기존과 다른 방법을 사용하였다. 초기의 방법은 PWM 제어라는 점은 동일하지만 서보모터를 천천히 Duty ratio를 증가시키는 것이 아닌 바로 90°의 각을 유지시키는 PWM 신호를 주는 것이었다. 이 방법은 약을 공급하는 과정에서 약을 하나씩 떨어트리는 비율이 낮기에 PWM을 천천히 증가시켜 구멍을 막는 판을 천천히 여는 방식을 이용하였다. 실제로 서보모터 제어를 변경하기 전 후에 대해 실험을 진행하였으며, 실험에 사용된 약은 OO약을 사용하였고 약과 비슷한 크기를 가진 BB탄(6mm)를 사용하여 실험을 진행하였다. 실험은 서보모터가 작동할 때 약이 하나씩 제대로 떨어지는 비율을 측정하였다. 실험 결과는 아래의 <표 1>과 같다.   
 <표 1> 서보모터 제어 방법과 약 실험 결과
(통과 가능한 약의 크기로 실험을 진행하였을 때 100번중 FF번 만큼 즉,CC% 확률로 약이 한알씩 떨어졌으며, 정확성은 앞으로 더 개선할 예정이다. )
실험 결과를 보면 OO약에 대해 서보모터 개선 전에 대해 AA% 개선된 결과를 보여주었고 BB탄(6mm)에 대한 결가는 BB% 개선된 결과를 보여주었다. 실험 결과로 알 수 있듯이 OOOOO한 점을 알 수 있다. 
통과 가능한 약의 크기로 실험을 진행하였을 때 100번중 00번 만큼 통과하였으며 00% 확률로 약이 한 알씩 떨어졌다는 것을 알 수 있다. 결과적으로, 00약에 대해 00% 개선된 결과를 보여주고, 000약에 대해선 00% 개선된 결과를 보여주었다. 정확성은 앞으로 더 개선해 나갈 예정이다. 

---------------------------


+ 결론   
본 논문에서는 꾸준히 규칙적으로 환자 및 사용자가 섭취해야 하는 약에 대해 관리할 수 있는 스마트 약상자를 개발하였다. 이 시스템을 통하여 규칙적으로 복용이 필요한 약들을 관리할 수 있는 측면에서 장점이 있다. 블루투스 어플리케이션을 통해 약상자와 연동을 하여 사용자가 지정한 시간에 맞게 약을 공급받을 수 있다. 이러한 시스템으로 사용자의 복약 순응도를 높이며, 약의 오남용을 방지할 수 있다. 향후 과제로는 현재보다 더 원활한 알약 공급을 위해 연구를 진행하며 보다 더 많은 약의 종류를 보관할 수 있는 방법을 고려해야한다.   

+ 참고문헌   
[1] ...

